version: 2

orbs:
  sauce-connect: saucelabs/sauce-connect@1.0.1
jobs:  
  build:  
    docker:  
      - image: circleci/node:lts
    steps: 
      - checkout
      - run: 
          name: Build
          command: npm install
      - run:
          name: Run Unit Tests
          command: npm test
      - run: 
          name: Local Deploy
          command: echo 'deploy'
      - run: 
          name: Run Functional Tests
          command: curl http://localhost:3000
      - run:
          name: Pre-Release
          command: npm run predeploy
      - run:
          name: Release
          command: npm run deploy